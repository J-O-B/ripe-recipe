{% extends "base.html" %}
{% block main_content %}

    <div class="row">
        <div class="col s12 m6 offset-m3">
            <h1 class="center-align black-text text-lighten-2 border round-border">{{ user|capitalize }}'s Profile:</h1>
        </div>
    </div>
        {% for x in userDB %}
            <div class="row">
                <div class="col s12 m3 offset-m1 light-blue prof-top-card">
                        <img id="prof_pic" src="{{ x.prof_pic }}" alt="Picture of {{ x.username }}">
                </div>
                <div class="col s12 m7 offset-m1 light-blue prof-top-card">
                    <div class="col s10">
                        <h2>{{ x.username|capitalize }}</h2>
                        <p>{{ x.bio }}</p>
                        <p></p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col s12 m5 offset-m1 light-blue">
                    <h3>{{ user|capitalize }}'s Recipes:</h3>
                        {% for x in recipes %}
                            {% if x.recipe_name != "" %}
                                <ul>
                                    <li>
                                        <a class="waves-effect waves-light btn modal-trigger" href="#{{ x.recipe_name }}">{{ x.recipe_name|capitalize }}</a>
                                    </li>
                                </ul>
                                <div id="{{ x.recipe_name }}" class="modal">
                                    <div class="modal-content center-align">
                                        <h4>{{ x.recipe_name|capitalize }}</h4>
                                        <hr>
                                        <p><img src="{{ x.pic_url }}" alt="{{ x.recipe_name|capitalize }}"></p>
                                        <p>{{ x.description|capitalize }}</p>
                                    </div>
                                    <div class="modal-footer">
                                        <button class="modal-close red btn-flat">Close</button>
                                        <a href="{{ url_for('selected', id=x._id) }}" class="modal-close green btn-flat">View Full Recipe</a>
                                    </div>
                                </div>
                            {% else %}
                                <h5>This User Does Not Yet Have Any Recipes Available.</h5>
                            {% endif %}
                        {% endfor %}
                </div>
                <div class="col spacer"></div>
                <div class="col s12 m5 offset-m1 light-blue">
                    <h3>{{ user|capitalize }}'s Favorites:</h3>
                </div>
            </div>

            <!--Social Wall-->
            <div class="row">
                <div class="col s10 offset-s1 light-blue lighten-3 center-align">
                    <h3>Leave a message on this users chopping board:</h3>
                    {% if session["user"] %}
                    <form method="POST">
                        <!--Initial Bug But Fixed By Forcing Inputs To These Fields-->
                        <input class="hidden" type="text" name="from" id="from" value="{{ session['user'] }}">
                        <input class="hidden" name="user" id="user" value="{{ user }}">
                        <!--Data For Database-->
                        <input type="textbox" name="message" id="message" minlength="1" maxlength="250" placeholder="Enter Your Message for {{ user|capitalize }}" class="col s11" required>
                        <button type="submit" class="col s1 btn green" value="0">
                            Send
                        </button>
                    </form>
                    {% elif not session["user"] %}
                        <h5>Please Log In To Leave A Message - <a href="{{ url_for('login') }}">Login</a></h5>
                    {% endif %}

                    <!--Start Messages-->
                    <div class="col s12 message-board">
                        <div class="col s10 offset-s1 light-blue lighten-2">
                            <h3>Messages For {{ user|capitalize }}</h3>
                            {% for x in messages %}
                                {{ x.message_text }}
                            {% endfor %}



                            <!---{% for x in messages %}-->
                            <div class="row">
                                <div class="col s6 center-align">
                                    From: {{ messages.message_from }}
                                </div>
                                <div class="col s6 center-align">
                                    Sent On: {{ messages.date }}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s10 offset-s1">
                                    <p>{{ messages.message_text }}</p>
                                </div>
                            </div>
                            <!---{% endfor %}--->
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}

{% endblock %}